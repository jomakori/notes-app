{
  "packages": [
    "go@latest",
    "nodejs@latest",
    "go-junit-report@latest",
    "pre-commit@latest",
    "golangci-lint@latest",
    "docker-buildx@latest"
  ],
  "shell": {
    "scripts": {
      "pre-commit": [
        "pre-commit run --all-files",
        "echo 'âœ… Pre-commit checks completed'"
      ],
      "test_fe": [
        "mkdir -p test-results && echo 'âœ… Test Results dir created'",
        "cd frontend && npm install && npm test",
        "echo 'ðŸ§ª Frontend tests completed'"
      ],
      "test_be": [
        "mkdir -p test-results && echo 'âœ… Test Results dir created'",
        "make test_be",
        "echo 'ðŸ§ª Backend tests completed'"
      ],
      "build_push": [
        "for var in GITHUB_TOKEN GH_USER IMAGE_NAME IMAGE_TAG REPO; do eval \"value=\\$$var\"; [ -z \"$value\" ] && { echo \"Error: $var is not set.\"; exit 1; }; done",
        "echo 'âœ… Env vars confirmed'",
        "echo \"$GITHUB_TOKEN\" | docker login ghcr.io --username \"$GH_USER\" --password-stdin",
        "echo 'âœ… Logged into GHCR registry'",
        "cd frontend && docker buildx create --use --name ci_build || true",
        "docker buildx build --builder ci_build --tag \"$IMAGE_NAME:$IMAGE_TAG\" --cache-from \"type=registry,ref=${REPO}:cache\" --cache-to \"type=registry,ref=${REPO}:cache,mode=max\" --push .",
      ]
    }
  }
}
